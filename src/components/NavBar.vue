<template>
  <div class="navbar">
    <router-link class="home-link" to="/">
      <span class="cssa-logo">
        <svg
          id="Layer_1"
          data-name="Layer 1"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 2000 2000"
        >
          <path
            d="M1860.49,828.56c-19.19-103.63-57.26-200.27-111.17-290.8-5-8.3-10.63-10.08-19.37-10.07q-337.12.31-674.25.23c-14.93,0-15,0-15-15.39q-.18-131.41-.3-262.83c0-12.19.15-24.38,0-36.56-.06-6.21,2.36-9.28,8.85-8.65,3.79.36,7.62.24,11.41.55,74.8,6.28,147.56,21.88,217.88,48.29A776.63,776.63,0,0,1,1510.7,389.91c5.22,4.44,10.5,6.78,17.47,6.73,32.38-.24,64.76,0,97.14-.15,3.21,0,7.57,1.58,9.36-2.09,1.94-4-2.4-5.92-4.61-8.22a890.2,890.2,0,0,0-65.76-61.75q-123-104.19-275.21-157c-115.62-40.42-234.63-54.7-356.59-45.82a866.55,866.55,0,0,0-533.68,235.8c-96.89,91.86-169.77,199.7-217.43,324.48q-73.2,191.67-54,396C139.2,1206,176.75,1326,238.49,1438.77c4.51,8.23,9.89,10.84,19,10.75,42.66-.43,85.32-.23,128-.23q226.27,0,452.54,0c16.42,0,16.44.11,16.45,16.48q0,62.85,0,125.7,0,62.28,0,124.56c0,5.72.73,11.51-7.17,13.36-26.43,6.18-53,11.5-80.26,7.62-19.57-2.79-38.07-8.74-51.1-24.92-10.57-13.12-9.73-18.63,2.49-29.35,19.4-17,36.23-35.93,44.59-61.06,4.27-12.83,2.3-15.38-10.75-13a55.33,55.33,0,0,1-18.19.65c-7.73-1.17-11.19-4.24-5.68-12.12a130.73,130.73,0,0,0,16.89-32.3c1.43-4.18,4.54-9,1.09-13-3.82-4.47-9.37-1.9-14-.93-15.42,3.27-29.53,9.85-43.07,17.83-32.25,19-65.45,36.12-102.48,43.71-19.75,4-39.51,3.73-57.28-8-9.47-6.25-14.43-14.16-13.47-26.7,2.93-38.32-17.73-73-51.94-87.4-32.7-13.81-64.33-11.75-92.14,11.72-8.81,7.44-14.88,17.64-26.94,21.64-5.52,1.83-9.68,8.25-9.12,14.69s7.47,6.74,12.25,8.52c15.38,5.72,16.54,10.49,5.07,22.11-9,9.13-8.8,11.71,1.67,20.21,13.61,11.06,13.86,12.13,6.63,28.5-24.55,55.65-11.45,107.63,36.5,144.36a638.76,638.76,0,0,0,52.54,36.4c6.93,4.28,14.93,9.83,14,18s-11.25,7.28-17.78,9.72a4.68,4.68,0,0,1-1.13.18c-9.92,1.27-8.74,6.77-4.47,12.72,5.57,7.75,14.28,11.12,22.51,15.09,12.68,6.12,12.64,6.19,4.67,18-9.16,13.61-6.7,19.31,9.51,22.43,20.19,3.88,38.57-1.84,56-11.09,7-3.71,13.17-4.33,20.6-1.69,12.9,4.58,25.87,9.28,39.73,10.16,15.89,1,30.4-2.19,41.39-14.85,7.52-8.67,6.73-12.92-3.44-18.3a73,73,0,0,1-19.08-14.36c-14.14-14.92-13.26-18.07,6.52-23.75,1.83-.52,3.64-1.15,5.48-1.61,27.13-6.85,54.09-13.51,81,1.71,6.82,3.86,15,5.37,22.68,7.66,64.27,19.31,128.71,37.43,196.89,35.6,10.65-.29,13.66-3.58,13.55-13.82-.45-40.75-.21-81.51-.21-122.27,0-116.18-.12-232.36.25-348.54,0-11.37-3-15.46-14.78-14.95-19.39.83-38.85-.05-58.27,0q-272,.12-544,.65c-13.82,0-21-4-26.81-16.56-43.56-93.93-70.12-192.22-77.62-295.56-1.12-15.38-1-15.39,14.06-15.39H637.55q202.83,0,405.68,0c14.41,0,14.4-.08,14.4,14.58q0,288.54,0,577.08c0,77.32.14,154.64-.16,232,0,10.32,3.18,14.19,13.79,13.78,18.26-.72,36.56-.18,54.85-.19,16.05,0,16,0,16-16.66q-.06-196-.06-392c0-16.89,0-16.91,17.23-16.91H1629c2.66,0,5.33.05,8,.06,8.83,0,9.84,3.09,4.71,10.14a792,792,0,0,1-91.2,105.15c-54.37,52.34-114.74,96.48-181.79,131.27-6.1,3.16-7.33,6.63-4.14,12.69,9.91,18.87,19.79,37.78,29.1,57,4,8.28,8.55,9.1,16.06,4.61,18.29-10.93,37.24-20.81,55.26-32.16q231-145.49,340-396C1876.54,1177,1893.19,1005.17,1860.49,828.56Zm-864,125q-383.34,0-766.69,0c-21,0-21.47,3.48-19.46-21.35,9.12-112.79,40.55-219,95.26-318.15q86.61-157,231.91-262.12Q693.7,239.29,884.61,211.59c18.45-2.69,37-4.6,55.58-6.49,14.87-1.51,15.55-.75,15.55,14.16q-.11,152.53-.26,305.07c0,23.61.21,47.22.28,70.83,0,16.46,0,16.47,16,16.47q347.93,0,695.85-.36c13.77,0,21.18,4,27.34,16.17,46.48,91.71,75.88,188.34,85.55,290.82.76,8,1.25,16,2.21,23.88s-1.33,12.6-10.38,11.42a52.15,52.15,0,0,0-6.85,0Zm793.62,100.11q-12.27,157.33-82.68,298.53c-4.74,9.54-10.13,13-20.86,13q-264.43-.51-528.87-.24c-15.58,0-15.65-.06-15.65-15.88q0-148.5,0-297c0-14.79.07-14.84,15.32-14.85q154.78,0,309.56,0,154.21,0,308.42,0C1791.74,1037.25,1791.4,1037.32,1790.13,1053.63Z"
          />
          <path
            d="M412.87,1526.46c-.57,4.23-3.48,6.68-7.68,6.38s-7-3.13-6.74-7.64,3.36-6.88,7.66-6.65S412.84,1521.64,412.87,1526.46Z"
          />
        </svg>
      </span>
      <span class="home-text">
        McGill
        <b>CSSA</b>
      </span>
    </router-link>
    <div :class="{ mask: isDropdownOpen }"></div>
    <ul class="navbar-menu" v-if="!isSmallScreen">
      <li>Events</li>
      <li>
        <router-link class="link-element" to="/membership">Membership</router-link>
      </li>
      <li>Sponsorship</li>
    </ul>
    <div
      class="menu-icon"
      v-if="isSmallScreen"
      @click="toggleDropdown"
      :class="isDropdownOpen ? 'shift-right' : ''"
    >
      <div
        class="bar"
        :style="{ backgroundColor: barColor }"
        :class="isDropdownOpen ? 'rotate-to-x' : ''"
      ></div>
      <div
        class="bar"
        :style="{ backgroundColor: barColor }"
        :class="isDropdownOpen ? 'disappear' : ''"
      ></div>
      <div
        class="bar"
        :style="{ backgroundColor: barColor }"
        :class="isDropdownOpen ? 'rotate-to-x' : ''"
      ></div>
    </div>
  </div>
  <ul class="dropdown" :class="{ open: isDropdownOpen }">
    <li v-if="isDropdownOpen">EVENTS
      <svg width="400" height="17" viewBox="0 0 699 17" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M7.34329e-05 8.99719C0.0190177 13.4154 3.61606 16.9818 8.0343 16.9628C12.4525 16.9439 16.0189 13.3468 15.9999 8.92859C15.981 4.51035 12.3839 0.94402 7.9657 0.962964C3.54746 0.981908 -0.0188708 4.57895 7.34329e-05 8.99719ZM8.00643 10.4629L699.006 7.50005L698.994 4.50007L7.99357 7.4629L8.00643 10.4629Z" fill="#1A4F87"/>
      </svg>
    </li>
    <li v-if="isDropdownOpen">
      <router-link class="link-element" to="/membership">MEMBERSHIP</router-link>
      <svg width="400" height="17" viewBox="0 0 699 17" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M7.34329e-05 8.99719C0.0190177 13.4154 3.61606 16.9818 8.0343 16.9628C12.4525 16.9439 16.0189 13.3468 15.9999 8.92859C15.981 4.51035 12.3839 0.94402 7.9657 0.962964C3.54746 0.981908 -0.0188708 4.57895 7.34329e-05 8.99719ZM8.00643 10.4629L699.006 7.50005L698.994 4.50007L7.99357 7.4629L8.00643 10.4629Z" fill="#1A4F87"/>
      </svg>
    </li>
    <li v-if="isDropdownOpen">SPONSORS
      <svg width="400" height="17" viewBox="0 0 699 17" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M7.34329e-05 8.99719C0.0190177 13.4154 3.61606 16.9818 8.0343 16.9628C12.4525 16.9439 16.0189 13.3468 15.9999 8.92859C15.981 4.51035 12.3839 0.94402 7.9657 0.962964C3.54746 0.981908 -0.0188708 4.57895 7.34329e-05 8.99719ZM8.00643 10.4629L699.006 7.50005L698.994 4.50007L7.99357 7.4629L8.00643 10.4629Z" fill="#1A4F87"/>
      </svg>
    </li>
  </ul>
</template>

<script setup>
/* eslint-disable */
import { ref, onMounted, onUnmounted } from 'vue'

const logoSrc = ref('https://i.imgur.com/ZFcXCeq.png')
const barColor = ref('#ffffff')
const isDropdownOpen = ref(false)
const isSmallScreen = ref(false)

onMounted(() => {
  updateWindowWidth()
  window.addEventListener('resize', updateWindowWidth)
})

onUnmounted(() => {
  window.removeEventListener('resize', updateWindowWidth)
})

const updateWindowWidth = () => {
  if (window.innerWidth <= 800) {
    logoSrc.value = 'https://i.imgur.com/VCAT7eS.png'
    isSmallScreen.value = true
  } else {
    logoSrc.value = 'https://i.imgur.com/ZFcXCeq.png'
    isSmallScreen.value = false
    isDropdownOpen.value = false
  }
}

const toggleDropdown = () => {
  isDropdownOpen.value = !isDropdownOpen.value

  if (isDropdownOpen.value) {
    barColor.value = '#1A4F87'
    document.body.style.overflow = 'hidden'
  } else {
    barColor.value = '#ffffff'
    document.body.style.overflow = ''
  }
}
</script>

<style scoped>
.navbar {
  margin: 0;
  position: absolute;
  box-sizing: border-box;
  height: 100px;
  width: 100%;

  display: flex;
  align-items: center;
  justify-content: space-between;
}

.home-link {
  margin-left: 15px;
  height: 100%;
  z-index: 9;

  display: flex;

  text-decoration: none;
  animation: slideInFromTopFadeIn 0.6s forwards;
}

.home-link span {
  align-self: center;
  margin-left: 20px;
}

.cssa-logo svg {
  width: 60px;
  height: 60px;
  fill: #ffffff;
}

.home-text {
  margin: 0px;
  font-size: 36px;
  font-family: 'CircularStd';
  letter-spacing: -2px;

  color: #ffffff;
  transform: scale(1, 0.95);
}

.navbar-menu {
  list-style: none;
  display: flex;

  gap: 30px;
  margin-right: 50px;
  color: #fff;
  font-family: 'CircularStd';
  z-index: 9;
}
.navbar-menu li {
  opacity: 0;
  transform: translateY(-50px);
}

.navbar-menu li:nth-child(1) {
  animation: slideInFromTopFadeIn 0.6s forwards;
  animation-delay: 0.2s;
}

.navbar-menu li:nth-child(2) {
  animation: slideInFromTopFadeIn 0.6s forwards;
  animation-delay: 0.4s;
}

.navbar-menu li:nth-child(3) {
  animation: slideInFromTopFadeIn 0.6s forwards;
  animation-delay: 0.6s;
}

.menu-icon {
  height: 30px;
  width: 30px;
  margin-right: 20px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 5px;

  cursor: pointer;
  z-index: 12;

  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  animation: slideInFromTopFadeIn 0.6s forwards;
}

@keyframes slideInFromTopFadeIn {
  from {
    transform: translateY(-50px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.shift-right {
  transform: translateX(7px);
}

.bar {
  width: 30px;
  height: 2px;

  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease, margin 0.3s ease,
    background-color 0.3s ease;
  transform-origin: center;
}

.bar.rotate-to-x:first-child {
  transition-delay: 0.1s; /* Added delay for a sequential feel */
  transform: rotate(45deg) translateY(6px);
}

.bar.rotate-to-x:last-child {
  transition-delay: 0.2s; /* Added delay for a sequential feel */
  transform: rotate(-45deg) translateY(-6px);
}

.bar.disappear {
  opacity: 0;
  margin: 0 0 -5px 0;
}

.mask{
  margin: 0;
  position: fixed;
  width: 100vw;
  height: 200vh;
  background-color: rgba(227, 244, 255, 0.3);
  z-index: 10;
}

.dropdown {
  position: fixed;
  width: 100vw;
  height: 100vh;
  z-index: 11;

  margin: 0;
  padding: 0 0 0 20px;
  left: 30%;

  list-style: none;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 8vh;

  background-color: #E3F4FF;

  border-left-width: 10px;
  border-left-style: solid;
  border-image: linear-gradient(to bottom,     #FFEE8F 10.28%,
    #E3FBCF 20.63%,
    #BBF0FA 42.36%,
    #ABD9FF 56.45%,
    #5DABF3 70.52%,
    #448FD6 84.88%,
    #3262BA 100%) 1;
  transform: translateX(100%); /* Start the dropdown off-screen */
  transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s ease;
}

.dropdown.open {
  transform: translateX(0); /* Slide the dropdown into view */
}

.dropdown li {
  font-size: 8vw;
  font-weight: 700;
  font-style: italic;
  text-indent: 5%;
  color: #1A4F87;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  margin-right: 45%;

  opacity: 0;
  transform: translateY(30px);
  transition: opacity 0.4s ease, transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

.dropdown.open li:nth-child(1) {
  animation: fadeInDown 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards 0.1s; /* Modified timing and easing function */
}

.dropdown.open li:nth-child(2) {
  animation: fadeInDown 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards 0.25s; /* Modified timing and easing function */
}

.dropdown.open li:nth-child(3) {
  animation: fadeInDown 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards 0.4s; /* Modified timing and easing function */
}

@keyframes fadeInDown {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.link-element,
.link-element:visited {
  text-decoration: none;
  color: inherit;
}
</style>
